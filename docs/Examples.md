# 2. バックエンドとの連携

## 2-1. フロントエンドのビルド

フロントエンドとバックエンドそれぞれビルドが必要です。

以下のコマンドでフロントエンドのビルド（＋静的ファイルエクスポート）ができますが、2-2のバックエンドのビルド時にフロントエンドもいっしょにビルドできるのでやる必要はないです。

```shell
cd frontend
npm install
npm run build
npm run export
```

`frontend/out`ディレクトリに`index.html`ファイルなどが作成されれば成功。これをバックエンドと紐付ける（3-2.の項参照）

## 2-2. バックエンドのビルド

WebCFaceのルートディレクトリで

``` bash
mkdir build
cd build
cmake ..
make
```

このときフロントエンドもいっしょにビルドされます。
フロントエンドはpackage.jsonやfrontendのソースが変更されていなければ複数回makeしても1回しかビルドされないようになっています

フロントエンドをビルドする必要がないときはcmake時に`-DWEB_BUILD_FRONT=off`オプションをつけてください。その場合も`make frontend`と指定すればビルドできるはずです

## 2-3. 実行

buildディレクトリで ./example1 を起動すると、
```
[WebCFace] start server url= http://192.168.3.4:3001/
```
のように表示されます。

このurlをブラウザで開く(コピペするか、使ってるターミナルによってはCtrl+クリックとかでできるかも)と、フロントエンドが開きます