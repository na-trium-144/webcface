# Client

API Reference → WebCFace::Client

WebCFaceのメインとなるクラスです。

まずはClientのオブジェクトを作成しましょう。
引数には一意な名前を設定してください。

```cpp
#include <webcface/webcface.h>

WebCFace::Client wcli("sample");

// または WebCFace::Client wcli;
```

Client オブジェクトを作ると別スレッドでサーバーへの接続を開始します。
通信が切断された場合は自動で再接続します。

コンストラクタに指定するのはこのクライアントの名前(Memberの名前)です。
同時に接続している他のクライアントと名前が被らないようにしてください。

コンストラクタに名前を指定しない、または空文字列の場合、読み取り専用モードになります。
この場合他のクライアントとの被りは問題ありませんがデータを送信することができなくなります。

デフォルトではlocalhostの7530ポートに接続を試みますが、サーバーのポートを変更していたり別のpcに接続する場合はコンストラクタの引数でサーバーのアドレスとポートを指定できます。

## sync

```cpp
while(true){
    // ...

    wcli.sync();
}
```

Client::sync() をすることでこれ以降の章で扱う各種データを実際に送信します。
sync()自体は送信処理はせずキューに入れるだけであり、ノンブロッキングです。

データを受信するだけの場合もサーバーにデータのリクエストをするためsync()が必要になります。

メインプログラムの周期実行される場所などで繰り返し呼ぶようにしてください。


sync()を呼び出すプログラムを動かしたら、WebUIを開いてみましょう。
そして右上のメニューを開き、Clientの初期化時に指定した名前がそこに表示されていれば正しく通信できています。

## 切断する

Client::close() で切断します。
またはデストラクタでも自動的に切断します。

## ログ出力

![ver1.1.7から](https://img.shields.io/badge/ver1.1.7~-00599c?logo=C%2B%2B)
`WEBCFACE_VERBOSE` 環境変数が存在する場合、WebCFaceの通信に関するログ(接続、切断、メッセージのエラー)が出力されます。
また `WEBCFACE_TRACE` 環境変数が存在すると内部で使用しているlibcurlの出力も表示します。

[Tutorial](./00_tutorial.md) ←前 | 次→ [Member](./02_member.md)
