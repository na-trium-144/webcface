<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WebCFace: Canvas3D</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_custom.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">WebCFace<span id="projectnumber">&#160;1.5.2</span>
   </div>
   <div id="projectbrief">Web-based RPC &amp; UI Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_20__canvas3d.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Canvas3D</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md40"></a> <img src="https://img.shields.io/badge/1.4~-00599c?logo=C%2B%2B" alt="c++ ver1.4" class="inline"/> <img src="https://img.shields.io/badge/1.3~-f7df1e?logo=JavaScript&amp;logoColor=black" alt="js ver1.3" class="inline"/></p>
<p>API Reference → <a class="el" href="classwebcface_1_1Canvas3D.html" title="Canvas3Dの送受信データを表すクラス">webcface::Canvas3D</a>, <a class="el" href="namespacewebcface_1_1Geometries.html">webcface::Geometries</a>, <a class="el" href="classwebcface_1_1Common_1_1Point.html" title="3次元の座標">webcface::Point</a>, <a class="el" href="classwebcface_1_1Common_1_1Transform.html" title="3次元の座標と回転">webcface::Transform</a></p>
<p>3D空間上のオブジェクト配置データを送受信し、WebUI上に表示できます。</p>
<p>Member::canvas3D() でCanvas3Dクラスのオブジェクトが得られます </p><div class="fragment"><div class="line"><a class="code hl_class" href="classwebcface_1_1Canvas3D.html">webcface::Canvas3D</a> hoge = wcli.<a class="code hl_function" href="classwebcface_1_1Canvas3D.html#aa8fab40ead35fa8e761986d5f4000a5c">member</a>(<span class="stringliteral">&quot;a&quot;</span>).<a class="code hl_function" href="classwebcface_1_1Member.html#a0754c19390f54b3f2c8ee81456ecc1b8">canvas3D</a>(<span class="stringliteral">&quot;hoge&quot;</span>);</div>
<div class="ttc" id="aclasswebcface_1_1Canvas3D_html"><div class="ttname"><a href="classwebcface_1_1Canvas3D.html">webcface::Canvas3D</a></div><div class="ttdoc">Canvas3Dの送受信データを表すクラス</div><div class="ttdef"><b>Definition</b> canvas3d.h:167</div></div>
<div class="ttc" id="aclasswebcface_1_1Canvas3D_html_aa8fab40ead35fa8e761986d5f4000a5c"><div class="ttname"><a href="classwebcface_1_1Canvas3D.html#aa8fab40ead35fa8e761986d5f4000a5c">webcface::Canvas3D::member</a></div><div class="ttdeci">Member member() const</div><div class="ttdoc">Memberを返す</div><div class="ttdef"><b>Definition</b> field.cc:8</div></div>
<div class="ttc" id="aclasswebcface_1_1Member_html_a0754c19390f54b3f2c8ee81456ecc1b8"><div class="ttname"><a href="classwebcface_1_1Member.html#a0754c19390f54b3f2c8ee81456ecc1b8">webcface::Member::canvas3D</a></div><div class="ttdeci">Canvas3D canvas3D(const std::string &amp;field) const</div><div class="ttdoc">canvas3dを参照する。</div><div class="ttdef"><b>Definition</b> member.cc:17</div></div>
</div><!-- fragment --><p>Member::canvas3DEntries() でそのMemberが送信しているCanvas3Dのリストが得られます </p><div class="fragment"><div class="line"><span class="keywordflow">for</span>(<span class="keyword">const</span> <a class="code hl_class" href="classwebcface_1_1Canvas3D.html">webcface::Canvas3D</a> &amp;v: wcli.member(<span class="stringliteral">&quot;a&quot;</span>).canvas3DEntries()){</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Member::onCanvas3DEntry() で新しくデータが追加されたときのコールバックを設定できます </p><div class="fragment"><div class="line">wcli.member(<span class="stringliteral">&quot;a&quot;</span>).onCanvas3DEntry().appendListener([](<a class="code hl_class" href="classwebcface_1_1Canvas3D.html">webcface::Canvas3D</a> v){ <span class="comment">/* ... */</span> });</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md41"></a>
Point, Transform</h1>
<p>WebCFaceでは3次元の座標を表すクラスとして <a class="el" href="classwebcface_1_1Common_1_1Point.html" title="3次元の座標">webcface::Point</a>, 座標変換(平行移動してから回転)を表すクラスとして <a class="el" href="classwebcface_1_1Common_1_1Transform.html" title="3次元の座標と回転">webcface::Transform</a> があります。</p>
<p>Pointでは x, y, z 座標、Transformでは x, y, z 座標と z, y, x軸回りの回転角を指定します。 (WebCFaceでは回転はz-y-xの順で回転するオイラー角で表現します。)</p>
<p>Point, Transformオブジェクトからは<code>pos()</code>, <code>rot()</code>で座標と回転角を取得できます。 </p><div class="fragment"><div class="line">Point p{1, 2, 3};</div>
<div class="line"><span class="keywordtype">double</span> x = p.pos()[0]; <span class="comment">// 1 (x座標)</span></div>
<div class="line">Transform r{1, 2, 3, 4, 5, 6};</div>
<div class="line"><span class="keywordtype">double</span> x = r.pos()[0]; <span class="comment">// 1 (x座標)</span></div>
<div class="line"><span class="keywordtype">double</span> alpha = r.rot()[0]; <span class="comment">// 4 (z軸回り)</span></div>
</div><!-- fragment --><p><a class="el" href="namespacewebcface_1_1Common.html#a9cc7119f63c09d929d8218008d2bb386">webcface::identity()</a> は原点、回転なしのTransformを返します。</p>
<h1><a class="anchor" id="autotoc_md42"></a>
送信</h1>
<p>使い方は<a class="el" href="md_13__view.html">View</a>とだいたい同じになっています。 Canvas3Dオブジェクトを作り、 Canvas3D::add() で要素を追加し、 最後にCanvas3D::sync()をしてからClient::sync()をすることで送信されます。</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="classwebcface_1_1Canvas3D.html">webcface::Canvas3D</a> canvas = wcli.canvas3D(<span class="stringliteral">&quot;hoge&quot;</span>);</div>
<div class="line"><span class="comment">// canvas.init(); // ←オブジェクトcanvasを新規に構築せず繰り返し使いまわす場合は必要</span></div>
<div class="line">canvas.<a class="code hl_function" href="classwebcface_1_1Canvas3D.html#a33ff806aea7697fb808c50493e4eb764">add</a>(...);</div>
<div class="line">canvas.<a class="code hl_function" href="classwebcface_1_1Canvas3D.html#a420903f6795f1dd202e02d481a010822">sync</a>(); <span class="comment">// ここまでにcanvasに追加したものをクライアントに反映</span></div>
<div class="line"> </div>
<div class="line">wcli.<a class="code hl_function" href="classwebcface_1_1Canvas3D.html#a420903f6795f1dd202e02d481a010822">sync</a>();</div>
<div class="ttc" id="aclasswebcface_1_1Canvas3D_html_a33ff806aea7697fb808c50493e4eb764"><div class="ttname"><a href="classwebcface_1_1Canvas3D.html#a33ff806aea7697fb808c50493e4eb764">webcface::Canvas3D::add</a></div><div class="ttdeci">Canvas3D &amp; add(const Canvas3DComponentBase &amp;cc)</div><div class="ttdoc">Componentを追加</div><div class="ttdef"><b>Definition</b> canvas3d.cc:35</div></div>
<div class="ttc" id="aclasswebcface_1_1Canvas3D_html_a420903f6795f1dd202e02d481a010822"><div class="ttname"><a href="classwebcface_1_1Canvas3D.html#a420903f6795f1dd202e02d481a010822">webcface::Canvas3D::sync</a></div><div class="ttdeci">Canvas3D &amp; sync()</div><div class="ttdoc">Viewの内容をclientに反映し送信可能にする</div><div class="ttdef"><b>Definition</b> canvas3d.cc:22</div></div>
</div><!-- fragment --><p> C++ではCanvas3Dのデストラクタでも自動的にCanvas3D::sync()が呼ばれます。 Canvas3Dオブジェクトをコピーした場合、Canvas3Dオブジェクトの内容はコピーされるのではなく共有され、そのすべてのコピーが破棄されるまでsync()は呼ばれません。</p>
<p>addに指定可能なものとして、Geometry(後述)、<a class="el" href="md_21__robot__model.html">RobotModel</a> があります。</p>
<h2><a class="anchor" id="autotoc_md43"></a>
Geometry</h2>
<p>3次元の図形を表示するにはGeometryを指定します。</p>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacewebcface_1_1Geometries.html">webcface::Geometries</a>;</div>
<div class="line">canvas.<a class="code hl_function" href="classwebcface_1_1Canvas3D.html#a33ff806aea7697fb808c50493e4eb764">add</a>(</div>
<div class="line">    box(<a class="code hl_class" href="classwebcface_1_1Common_1_1Point.html">webcface::Point</a>{0, 0, 0}, <a class="code hl_class" href="classwebcface_1_1Common_1_1Point.html">webcface::Point</a>{2, 2, 2}),</div>
<div class="line">    <a class="code hl_function" href="namespacewebcface_1_1Common.html#a9cc7119f63c09d929d8218008d2bb386">webcface::identity</a>(),</div>
<div class="line">    webcface::ViewColor::gray</div>
<div class="line">);</div>
<div class="ttc" id="aclasswebcface_1_1Common_1_1Point_html"><div class="ttname"><a href="classwebcface_1_1Common_1_1Point.html">webcface::Point</a></div><div class="ttdoc">3次元の座標</div><div class="ttdef"><b>Definition</b> transform.h:11</div></div>
<div class="ttc" id="anamespacewebcface_1_1Common_html_a9cc7119f63c09d929d8218008d2bb386"><div class="ttname"><a href="namespacewebcface_1_1Common.html#a9cc7119f63c09d929d8218008d2bb386">webcface::Common::identity</a></div><div class="ttdeci">Transform identity()</div><div class="ttdef"><b>Definition</b> transform.h:55</div></div>
<div class="ttc" id="anamespacewebcface_1_1Geometries_html"><div class="ttname"><a href="namespacewebcface_1_1Geometries.html">webcface::Geometries</a></div><div class="ttdef"><b>Definition</b> canvas3d.h:18</div></div>
</div><!-- fragment --><ul>
<li>最初の引数にGeometryを指定します。引数は種類ごとに異なります。(後述)</li>
<li>2番目の引数にTransformを指定するとGeometryを移動することができます。省略時はidentity()になります。</li>
<li>3番目の引数に色を指定します。指定方法はViewと同様の <a class="el" href="namespacewebcface_1_1Common.html#a5dcc1f15d6a60ca34207565aeb74124a">webcface::ViewColor</a> です。省略時はinherit(表示上はgrayと同じ)になります。</li>
</ul>
<p>C++ではGeometryは <a class="el" href="namespacewebcface_1_1Geometries.html">webcface::Geometries</a> 名前空間に定義されていますが、<code>webcface::</code> の名前空間でもアクセス可能です。</p>
<p>以下のGeometryが利用可能です。</p>
<ul>
<li><code>line(Point begin, Point end)</code><ul>
<li>beginからendまで直線を引く</li>
</ul>
</li>
<li><code>plane(Transform origin, double width, double height)</code><ul>
<li>originのxy平面上に、originを中心として幅(x方向の長さ)がwidth, 高さ(y方向の長さ)がheightの長方形を描画</li>
</ul>
</li>
<li><code>box(Point vertex1, Point vertex2)</code><ul>
<li>対角の頂点2点を指定して直方体を描画</li>
<li>各辺は x, y, z 軸に平行</li>
</ul>
</li>
<li><code>circle(Transform origin, double radius)</code><ul>
<li>originのxy平面上に、originを中心として半径radiusの円を描画</li>
</ul>
</li>
<li><code>cylinder(Transform origin, double radius, double length)</code><ul>
<li>originのyz平面上にoriginを中心として半径radiusの円を描画し、それをx軸方向にlength押し出した円柱を描画</li>
</ul>
</li>
<li><code>sphere(Point origin, double radius)</code><ul>
<li>originを中心とし半径radiusの球を描画</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md44"></a>
受信</h1>
<p>Canvas3D::tryGet(), get() で Canvas3DComponent のリストを取得できます。 Canvas3DComponent オブジェクトからGeometryなどパラメータを取得する方法に関しては <a class="el" href="classwebcface_1_1Canvas3DComponent.html" title="Canvas3Dに表示する要素">webcface::Canvas3DComponent</a> のリファレンスを参照してください。</p>
<p>Canvas3D::appendListener() で受信したデータが変化したときにコールバックを呼び出すことができます。</p>
<div class="section_buttons"></div><div class="section_buttons"><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Previous   </th><th class="markdownTableHeadRight">Next    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="md_15__image.html">Image</a>   </td><td class="markdownTableBodyRight"><a class="el" href="md_21__robot__model.html">RobotModel</a>   </td></tr>
</table>
</div><div class="section_buttons"></div> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jan 22 2024 13:58:30 for WebCFace by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
